import{r as a,L as D,e as I,j as e,S as p,c as i,C as g,H as s,d as z}from"./index-OhEqexm3.js";import{S as r,I as l,K as V,B as L}from"./setting_descriptions-CPtansmw.js";import{A as q}from"./args-input-CUqzUOJe.js";const G=()=>{const[u,j]=a.useState("hostname"),[d,H]=a.useState(80),[y,k]=a.useState(""),[S,T]=a.useState(""),[f,v]=a.useState(!0),[_,N]=a.useState(!1),[c,h]=a.useState(!1),[C,P]=a.useState(!1),[n,x]=a.useState(!1),[m,b]=a.useState([]),[A,M]=a.useState(D.Dotnet),[w,B]=a.useState([]),[F,R]=a.useState([]),{updateSite:E}=I(),W=()=>{d&&E.mutateAsync({siteSettings:{host_name:u,port:d,dir:y,bin:S,https:f,auto_start:_,capture_subdomains:c,disable_tcp_tunnel_mode:C,forward_subdomains:n,hints:m,log_format:A,env_vars:w,args:F}})};return e.jsxs(e.Fragment,{children:[e.jsxs(p,{noTopSeparator:!0,children:[e.jsx(i,{title:"Hostname",subTitle:r.hostname,children:e.jsx(l,{placeholder:"my-site.com",value:u,onChange:t=>j(t.target.value)})}),e.jsx(i,{title:"Port",subTitle:r.port,children:e.jsx(l,{value:d,onChange:t=>{isNaN(Number(t.target.value))||H(Number(t.target.value))}})})]}),e.jsxs(p,{noTopSeparator:!0,noBottomSeparator:!0,children:[e.jsx(i,{title:"Directory",subTitle:r.directory,children:e.jsx(l,{placeholder:"/var/www/my-site",value:y,onChange:t=>k(t.target.value)})}),e.jsx(i,{title:"Bin",subTitle:r.binary,children:e.jsx(l,{placeholder:"my-binary",value:S,onChange:t=>T(t.target.value)})})]}),e.jsx(p,{noTopSeparator:!0,noBottomSeparator:!0,children:e.jsx(i,{labelFor:"use_https",rowOnly:!0,title:"HTTPS",subTitle:r.https,children:e.jsx(l,{checked:f,onChange:t=>{v(t.target.checked)},name:"use_https",id:"use_https",type:"checkbox",style:{width:"20px",height:"20px"}})})}),e.jsx(p,{noTopSeparator:!0,children:e.jsx(i,{labelFor:"auto_start",rowOnly:!0,title:"Auto start",subTitle:r.auto_start,children:e.jsx(l,{id:"auto_start",checked:_,name:"auto_start",onChange:t=>{N(t.target.checked)},type:"checkbox",style:{width:"20px",height:"20px"}})})}),e.jsxs(p,{noTopSeparator:!0,children:[e.jsx(i,{labelFor:"capture_subdomains",rowOnly:!0,title:"Capture sub-domains",subTitle:r.capture_subdomains,children:e.jsx(l,{onChange:t=>{h(t.target.checked)},checked:c,type:"checkbox",name:"capture_subdomains",id:"capture_subdomains",style:{width:"20px",height:"20px"}})}),e.jsx(i,{rowOnly:!0,labelFor:"disable_tcp_tunnel",title:"Disable TCP tunnel mode",subTitle:r.disable_tcp_tunnel,children:e.jsx(l,{type:"checkbox",checked:C,onChange:t=>{P(t.target.checked)},id:"disable_tcp_tunnel",name:"disable_tcp_tunnel",style:{width:"20px",height:"20px"}})}),e.jsx(i,{rowOnly:!0,labelFor:"forward_subdomains",title:"Forward sub-domains",subTitle:r.forward_subdomains,children:e.jsx(l,{type:"checkbox",checked:n,onChange:t=>{x(t.target.checked)},id:"forward_subdomains",name:"forward_subdomains",style:{width:"20px",height:"20px"}})})]}),e.jsx(p,{noTopSeparator:!0,children:e.jsx(i,{title:"Log format",subTitle:r.log_format,children:e.jsxs("select",{className:"text-black rounded pl-3 pr-3",value:A,onChange:t=>{M(t.target.value)},name:"log_format",style:{height:"32px",width:"100%"},children:[e.jsx("option",{value:D.Standard,children:"Standard"}),e.jsx("option",{value:D.Dotnet,children:"Dotnet"})]})})}),e.jsx("div",{style:{marginTop:"20px"}}),e.jsx(i,{title:"Hints",subTitle:r.h2_hint}),e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"start",marginTop:"10px",marginBottom:"20px"},children:[e.jsx(g,{onClick:()=>{m.includes(s.H2)?b(t=>[...t.filter(o=>o!==s.H2)]):b(t=>[...t,s.H2])},checked:m.includes(s.H2),title:"H2"}),e.jsx(g,{onClick:()=>{m.includes(s.H2C)?b(t=>[...t.filter(o=>o!==s.H2C)]):b(t=>[...t,s.H2C])},checked:m.includes(s.H2C),title:"H2C"}),e.jsx(g,{onClick:()=>{m.includes(s.H2CPK)?b(t=>[...t.filter(o=>o!==s.H2CPK)]):b(t=>[...t,s.H2CPK])},checked:m.includes(s.H2CPK),title:"H2CPK"}),e.jsx(g,{onClick:()=>{m.includes(s.NOH2)?b(t=>[...t.filter(o=>o!==s.NOH2)]):b(t=>[...t,s.NOH2])},checked:m.includes(s.NOH2),title:"NOH2"})]}),e.jsx(i,{title:"Environment variables",subTitle:r.env_vars}),e.jsx(V,{onRemoveKey:t=>{B(w==null?void 0:w.filter(o=>o.key!==t))},onNewKey:(t,o)=>{B(O=>[...O.filter(K=>K.key!==o),t])},keys:w}),e.jsx("div",{style:{marginBottom:"20px"}}),e.jsx(i,{title:"Arguments",subTitle:r.args}),e.jsx(q,{onAddArg:(t,o)=>{R(O=>[...O.filter(K=>K!==o),t])},onRemoveArg:t=>{R(F.filter(o=>o!==t))},defaultKeys:F}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"end",marginTop:"20px"},children:e.jsx(L,{onClick:W,style:{width:"max-content",background:"var(--color7)"},children:"Create site"})})]})},J=()=>{const[u,j]=a.useState("hostname"),[d,H]=a.useState(80),[y,k]=a.useState(!0),[S,T]=a.useState(!1),[f,v]=a.useState(!1),[_,N]=a.useState(!1),[c,h]=a.useState([]),{updateRemoteSite:C}=I(),P=()=>{d&&C.mutateAsync({siteSettings:{host_name:u,backends:[{address:u,https:y,port:d,hints:c}],capture_subdomains:S,disable_tcp_tunnel_mode:f,forward_subdomains:_}})};return e.jsxs(e.Fragment,{children:[e.jsxs(p,{noTopSeparator:!0,children:[e.jsx(i,{title:"Hostname",subTitle:r.hostname,children:e.jsx(l,{value:u,placeholder:"my-site.com",onChange:n=>j(n.target.value)})}),e.jsx(i,{title:"Port",subTitle:r.port,children:e.jsx(l,{value:d,onChange:n=>{isNaN(Number(n.target.value))||H(Number(n.target.value))}})})]}),e.jsx(p,{noTopSeparator:!0,children:e.jsx(i,{labelFor:"use_https",rowOnly:!0,title:"HTTPS",subTitle:r.https,children:e.jsx(l,{checked:y,onChange:n=>{k(n.target.checked)},name:"use_https",id:"use_https",type:"checkbox",style:{width:"20px",height:"20px"}})})}),e.jsxs(p,{noTopSeparator:!0,children:[e.jsx(i,{labelFor:"capture_subdomains",rowOnly:!0,title:"Capture sub-domains",subTitle:r.capture_subdomains,children:e.jsx(l,{onChange:n=>{T(n.target.checked)},checked:S,type:"checkbox",name:"capture_subdomains",id:"capture_subdomains",style:{width:"20px",height:"20px"}})}),e.jsx(i,{rowOnly:!0,labelFor:"disable_tcp_tunnel",title:"Disable TCP tunnel mode",subTitle:r.disable_tcp_tunnel,children:e.jsx(l,{type:"checkbox",checked:f,onChange:n=>{v(n.target.checked)},id:"disable_tcp_tunnel",name:"disable_tcp_tunnel",style:{width:"20px",height:"20px"}})}),e.jsx(i,{rowOnly:!0,labelFor:"forward_subdomains",title:"Forward sub-domains",subTitle:r.forward_subdomains,children:e.jsx(l,{type:"checkbox",checked:_,onChange:n=>{N(n.target.checked)},id:"forward_subdomains",name:"forward_subdomains",style:{width:"20px",height:"20px"}})})]}),e.jsx(i,{title:"Hints",subTitle:r.h2_hint}),e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"start",marginTop:"10px"},children:[e.jsx(g,{onClick:()=>{c.includes(s.H2)?h(n=>[...n.filter(x=>x!==s.H2)]):h(n=>[...n,s.H2])},checked:c.includes(s.H2),title:"H2"}),e.jsx(g,{onClick:()=>{c.includes(s.H2C)?h(n=>[...n.filter(x=>x!==s.H2C)]):h(n=>[...n,s.H2C])},checked:c.includes(s.H2C),title:"H2C"}),e.jsx(g,{onClick:()=>{c.includes(s.H2CPK)?h(n=>[...n.filter(x=>x!==s.H2CPK)]):h(n=>[...n,s.H2CPK])},checked:c.includes(s.H2CPK),title:"H2CPK"}),e.jsx(g,{onClick:()=>{c.includes(s.NOH2)?h(n=>[...n.filter(x=>x!==s.NOH2)]):h(n=>[...n,s.NOH2])},checked:c.includes(s.NOH2),title:"NOH2"})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"end",marginTop:"20px"},children:e.jsx(L,{onClick:P,style:{width:"max-content",background:"var(--color7)"},children:"Create site"})})]})},Q=()=>{const[u,j]=a.useState("HostedProcess");return e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{textTransform:"uppercase",fontSize:".9rem",fontWeight:"bold",color:"var(--color2)"},children:"new site"}),e.jsxs("div",{style:{paddingBottom:"50px",maxWidth:"750px"},onSubmit:d=>{d.preventDefault()},children:[e.jsx(p,{children:e.jsx(i,{title:"Type of site",subTitle:r.site_type,children:e.jsxs("select",{className:"text-black rounded pl-3 pr-3",value:u,onChange:d=>{j(d.target.value)},style:{height:"30px",width:"100%"},children:[e.jsx("option",{value:"HostedProcess",children:"Hosted process"}),e.jsx("option",{value:"RemoteSite",children:"Remote site"})]})})}),u==="HostedProcess"&&e.jsx(G,{}),u==="RemoteSite"&&e.jsx(J,{})]})]})},Z=z("/new-site")({component:Q});export{Z as Route};
