import{r as a,L as D,e as E,j as e,S as d,c as r,C as g,H as s,d as z}from"./index-BAcZo2i6.js";import{S as i,I as l,E as V,B as I}from"./env_variables-DBgTPTRJ.js";import{A as q}from"./arguments-90i_LMyj.js";const G=()=>{const[h,j]=a.useState("hostname"),[u,H]=a.useState(80),[S,T]=a.useState(""),[y,k]=a.useState(""),[f,v]=a.useState(!0),[_,N]=a.useState(!1),[c,p]=a.useState(!1),[C,P]=a.useState(!1),[n,x]=a.useState(!1),[m,b]=a.useState([]),[A,L]=a.useState(D.Dotnet),[w,B]=a.useState([]),[F,R]=a.useState([]),{updateSite:M}=E(),W=()=>{u&&M.mutateAsync({siteSettings:{host_name:h,port:u,dir:S,bin:y,https:f,auto_start:_,capture_subdomains:c,disable_tcp_tunnel_mode:C,forward_subdomains:n,hints:m,log_format:A,env_vars:w,args:F}})};return e.jsxs(e.Fragment,{children:[e.jsxs(d,{noTopSeparator:!0,children:[e.jsx(r,{title:"Hostname",subTitle:i.hostname,children:e.jsx(l,{placeholder:"my-site.com",value:h,onChange:t=>j(t.target.value)})}),e.jsx(r,{title:"Port",subTitle:i.port,children:e.jsx(l,{value:u,onChange:t=>{isNaN(Number(t.target.value))||H(Number(t.target.value))}})})]}),e.jsxs(d,{noTopSeparator:!0,noBottomSeparator:!0,children:[e.jsx(r,{title:"Directory",subTitle:i.directory,children:e.jsx(l,{placeholder:"/var/www/my-site",value:S,onChange:t=>T(t.target.value)})}),e.jsx(r,{title:"Bin",subTitle:i.binary,children:e.jsx(l,{placeholder:"my-binary",value:y,onChange:t=>k(t.target.value)})})]}),e.jsx(d,{noTopSeparator:!0,noBottomSeparator:!0,children:e.jsx(r,{labelFor:"use_https",rowOnly:!0,title:"HTTPS",subTitle:i.https,children:e.jsx(l,{checked:f,onChange:t=>{v(t.target.checked)},name:"use_https",id:"use_https",type:"checkbox",style:{width:"20px",height:"20px"}})})}),e.jsx(d,{noTopSeparator:!0,children:e.jsx(r,{labelFor:"auto_start",rowOnly:!0,title:"Auto start",subTitle:i.auto_start,children:e.jsx(l,{id:"auto_start",checked:_,name:"auto_start",onChange:t=>{N(t.target.checked)},type:"checkbox",style:{width:"20px",height:"20px"}})})}),e.jsxs(d,{noTopSeparator:!0,children:[e.jsx(r,{labelFor:"capture_subdomains",rowOnly:!0,title:"Capture sub-domains",subTitle:i.capture_subdomains,children:e.jsx(l,{onChange:t=>{p(t.target.checked)},checked:c,type:"checkbox",name:"capture_subdomains",id:"capture_subdomains",style:{width:"20px",height:"20px"}})}),e.jsx(r,{rowOnly:!0,labelFor:"disable_tcp_tunnel",title:"Disable TCP tunnel mode",subTitle:i.disable_tcp_tunnel,children:e.jsx(l,{type:"checkbox",checked:C,onChange:t=>{P(t.target.checked)},id:"disable_tcp_tunnel",name:"disable_tcp_tunnel",style:{width:"20px",height:"20px"}})}),e.jsx(r,{rowOnly:!0,labelFor:"forward_subdomains",title:"Forward sub-domains",subTitle:i.forward_subdomains,children:e.jsx(l,{type:"checkbox",checked:n,onChange:t=>{x(t.target.checked)},id:"forward_subdomains",name:"forward_subdomains",style:{width:"20px",height:"20px"}})})]}),e.jsx(d,{noTopSeparator:!0,children:e.jsx(r,{title:"Log format",subTitle:i.log_format,children:e.jsxs("select",{className:"text-black rounded pl-3 pr-3",value:A,onChange:t=>{L(t.target.value)},name:"log_format",style:{height:"32px",width:"100%"},children:[e.jsx("option",{value:D.Standard,children:"Standard"}),e.jsx("option",{value:D.Dotnet,children:"Dotnet"})]})})}),e.jsx("div",{style:{marginTop:"20px"}}),e.jsx(r,{title:"Hints",subTitle:i.h2_hint}),e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"start",marginTop:"10px",marginBottom:"20px"},children:[e.jsx(g,{onClick:()=>{m.includes(s.H2)?b(t=>[...t.filter(o=>o!==s.H2)]):b(t=>[...t,s.H2])},checked:m.includes(s.H2),title:"H2"}),e.jsx(g,{onClick:()=>{m.includes(s.H2C)?b(t=>[...t.filter(o=>o!==s.H2C)]):b(t=>[...t,s.H2C])},checked:m.includes(s.H2C),title:"H2C"}),e.jsx(g,{onClick:()=>{m.includes(s.H2CPK)?b(t=>[...t.filter(o=>o!==s.H2CPK)]):b(t=>[...t,s.H2CPK])},checked:m.includes(s.H2CPK),title:"H2CPK"}),e.jsx(g,{onClick:()=>{m.includes(s.NOH2)?b(t=>[...t.filter(o=>o!==s.NOH2)]):b(t=>[...t,s.NOH2])},checked:m.includes(s.NOH2),title:"NOH2"})]}),e.jsx(d,{noBottomSeparator:!0,children:e.jsx(r,{vertical:!0,title:"Environment variables",subTitle:i.env_vars,children:e.jsx(V,{keys:w,onRemoveKey:t=>{B(w==null?void 0:w.filter(o=>o.key!==t))},onNewKey:(t,o)=>{B(O=>[...O.filter(K=>K.key!==o),t])}})})}),e.jsx(d,{noBottomSeparator:!0,noTopSeparator:!0,children:e.jsx(r,{vertical:!0,title:"Arguments",subTitle:i.args,children:e.jsx(q,{onAddArg:(t,o)=>{R(O=>[...O.filter(K=>K!==o),t])},onRemoveArg:t=>{R(F.filter(o=>o!==t))},defaultKeys:F})})}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"end",marginTop:"20px"},children:e.jsx(I,{onClick:W,style:{width:"max-content",background:"var(--color7)"},children:"Create site"})})]})},J=()=>{const[h,j]=a.useState("hostname"),[u,H]=a.useState(80),[S,T]=a.useState(!0),[y,k]=a.useState(!1),[f,v]=a.useState(!1),[_,N]=a.useState(!1),[c,p]=a.useState([]),{updateRemoteSite:C}=E(),P=()=>{u&&C.mutateAsync({siteSettings:{host_name:h,backends:[{address:h,https:S,port:u,hints:c}],capture_subdomains:y,disable_tcp_tunnel_mode:f,forward_subdomains:_}})};return e.jsxs(e.Fragment,{children:[e.jsxs(d,{noTopSeparator:!0,children:[e.jsx(r,{title:"Hostname",subTitle:i.hostname,children:e.jsx(l,{value:h,placeholder:"my-site.com",onChange:n=>j(n.target.value)})}),e.jsx(r,{title:"Port",subTitle:i.port,children:e.jsx(l,{value:u,onChange:n=>{isNaN(Number(n.target.value))||H(Number(n.target.value))}})})]}),e.jsx(d,{noTopSeparator:!0,children:e.jsx(r,{labelFor:"use_https",rowOnly:!0,title:"HTTPS",subTitle:i.https,children:e.jsx(l,{checked:S,onChange:n=>{T(n.target.checked)},name:"use_https",id:"use_https",type:"checkbox",style:{width:"20px",height:"20px"}})})}),e.jsxs(d,{noTopSeparator:!0,children:[e.jsx(r,{labelFor:"capture_subdomains",rowOnly:!0,title:"Capture sub-domains",subTitle:i.capture_subdomains,children:e.jsx(l,{onChange:n=>{k(n.target.checked)},checked:y,type:"checkbox",name:"capture_subdomains",id:"capture_subdomains",style:{width:"20px",height:"20px"}})}),e.jsx(r,{rowOnly:!0,labelFor:"disable_tcp_tunnel",title:"Disable TCP tunnel mode",subTitle:i.disable_tcp_tunnel,children:e.jsx(l,{type:"checkbox",checked:f,onChange:n=>{v(n.target.checked)},id:"disable_tcp_tunnel",name:"disable_tcp_tunnel",style:{width:"20px",height:"20px"}})}),e.jsx(r,{rowOnly:!0,labelFor:"forward_subdomains",title:"Forward sub-domains",subTitle:i.forward_subdomains,children:e.jsx(l,{type:"checkbox",checked:_,onChange:n=>{N(n.target.checked)},id:"forward_subdomains",name:"forward_subdomains",style:{width:"20px",height:"20px"}})})]}),e.jsx(r,{title:"Hints",subTitle:i.h2_hint}),e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"start",marginTop:"10px"},children:[e.jsx(g,{onClick:()=>{c.includes(s.H2)?p(n=>[...n.filter(x=>x!==s.H2)]):p(n=>[...n,s.H2])},checked:c.includes(s.H2),title:"H2"}),e.jsx(g,{onClick:()=>{c.includes(s.H2C)?p(n=>[...n.filter(x=>x!==s.H2C)]):p(n=>[...n,s.H2C])},checked:c.includes(s.H2C),title:"H2C"}),e.jsx(g,{onClick:()=>{c.includes(s.H2CPK)?p(n=>[...n.filter(x=>x!==s.H2CPK)]):p(n=>[...n,s.H2CPK])},checked:c.includes(s.H2CPK),title:"H2CPK"}),e.jsx(g,{onClick:()=>{c.includes(s.NOH2)?p(n=>[...n.filter(x=>x!==s.NOH2)]):p(n=>[...n,s.NOH2])},checked:c.includes(s.NOH2),title:"NOH2"})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"end",marginTop:"20px"},children:e.jsx(I,{onClick:P,style:{width:"max-content",background:"var(--color7)"},children:"Create site"})})]})},Q=()=>{const[h,j]=a.useState("HostedProcess");return e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{textTransform:"uppercase",fontSize:".9rem",fontWeight:"bold",color:"var(--color2)"},children:"new site"}),e.jsxs("div",{style:{paddingBottom:"50px",maxWidth:"750px"},onSubmit:u=>{u.preventDefault()},children:[e.jsx(d,{children:e.jsx(r,{title:"Type of site",subTitle:i.site_type,children:e.jsxs("select",{className:"text-black rounded pl-3 pr-3",value:h,onChange:u=>{j(u.target.value)},style:{height:"30px",width:"100%"},children:[e.jsx("option",{value:"HostedProcess",children:"Hosted process"}),e.jsx("option",{value:"RemoteSite",children:"Remote site"})]})})}),h==="HostedProcess"&&e.jsx(G,{}),h==="RemoteSite"&&e.jsx(J,{})]})]})},Z=z("/new-site")({component:Q});export{Z as Route};
