import{r as n,b as f,n as v,k as T,j as e,S as g,g as s,h as a,I as r,o as l,B as C,p as N,C as k,c as D,d as E,e as L,f as F,i as B}from"./index-D8ZJl6Ku.js";const O=()=>{const[c,x]=n.useState(""),[d,m]=n.useState(""),[h,y]=n.useState(!1),[u,b]=n.useState(!1),[p,j]=n.useState(!1),{data:i}=f(),_=v(),{updateDirServer:w}=T(),S=()=>{w.mutateAsync({siteSettings:{host_name:c,dir:d,capture_subdomains:h,enable_directory_browsing:u,enable_lets_encrypt:p}},{onSettled(t,H,o){o.hostname!==o.siteSettings.host_name&&_.navigate({to:"/site",search:{tab:1,hostname:N(o.siteSettings.host_name)}})}})};return e.jsxs(e.Fragment,{children:[e.jsxs(g,{marginTop:"0px",noTopSeparator:!0,children:[e.jsx(s,{title:"Hostname",subTitle:a.hostname_frontend,children:e.jsx(r,{value:c,placeholder:"my-server.local",onChange:t=>x(t.target.value)})}),e.jsx(s,{title:"Directory",subTitle:a.directory,children:e.jsx(r,{value:d,placeholder:"/home/me/mysite",onChange:t=>m(t.target.value)})}),e.jsx(s,{dangerText:e.jsxs("span",{className:"text-[.8rem]",children:["This is the HTTP port configured for all sites, you can change it on the ",e.jsx(l,{className:"text-[var(--color2)] underline cursor-pointer",to:"/settings",children:"general settings"})," page."]}),title:"HTTP Port",children:e.jsx(r,{value:i.http_port,readOnly:!0,disabled:!0})}),e.jsx(s,{dangerText:e.jsxs("span",{className:"text-[.8rem]",children:["This is the TLS port configured for all sites, you can change it on the ",e.jsx(l,{className:"text-[var(--color2)] underline cursor-pointer",to:"/settings",children:"general settings"})," page."]}),title:"TLS Port",children:e.jsx(r,{value:i.tls_port,readOnly:!0,disabled:!0})})]}),e.jsxs(g,{noTopSeparator:!0,children:[e.jsx(s,{labelFor:"capture_subdomains",rowOnly:!0,title:"Capture sub-domains",subTitle:a.capture_subdomains,children:e.jsx(r,{onChange:t=>{y(t.target.checked)},checked:h,type:"checkbox",name:"capture_subdomains",id:"capture_subdomains",style:{width:"20px",height:"20px"}})}),e.jsx(s,{rowOnly:!0,labelFor:"enable_directory_browsing",title:"Enable directory browsing",subTitle:a.enable_directory_browsing,children:e.jsx(r,{type:"checkbox",checked:u,onChange:t=>{b(t.target.checked)},id:"enable_directory_browsing",name:"enable_directory_browsing",style:{width:"20px",height:"20px"}})}),e.jsx(s,{rowOnly:!0,labelFor:"lets_encrypt",title:"Enable Lets-Encrypt",dangerText:e.jsxs("p",{className:"text-[.8rem]",children:["Note: You need to have a valid email address configured under"," ",e.jsx(l,{className:"text-[var(--color2)] underline cursor-pointer",to:"/settings",children:"general settings"})," ","to use this."]}),children:e.jsx(r,{disabled:!i.lets_encrypt_account_email,type:"checkbox",checked:p,onChange:t=>{j(t.target.checked)},id:"lets_encrypt",name:"lets_encrypt",style:{width:"20px",height:"20px"}})})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"end",marginTop:"20px"},children:e.jsx(C,{onClick:S,style:{width:"max-content",background:"var(--color7)"},children:"Create site"})})]})},P=()=>e.jsx("main",{className:"grid flex-1 items-start gap-4 md:pb-8 md:gap-8 max-w-[900px]",children:e.jsxs(k,{children:[e.jsxs(D,{children:[e.jsx(E,{children:"New directory server"}),e.jsxs(L,{children:["A directory server configuration allows you to serve files from a directory on the local filesystem.",e.jsx("br",{}),"Both unencrypted (http) and encrypted (https) connections are supported, either self-signed or thru lets-encrypt.",e.jsx("br",{}),"You can specify rules for how the cache should behave, and you can also specify rules for how the files should be served."]})]}),e.jsx(F,{children:e.jsx(O,{})})]})}),R=B("/new-dirserver")({component:P});export{R as Route};
