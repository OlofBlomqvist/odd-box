import{l as re,r as g,j as e,t as N,i as B,O as le,V as K,C as k,c as D,d as A,e as O,f as I,U as ie,_ as M,Q as L,N as J,S as y,g as u,k as C,H as r,L as E,M as de,W as ce,X as ue,h as me}from"./index-C4yZE6Dy.js";import{B as z}from"./index-BNRUNEdY.js";import{S as m,I as b,B as R}from"./button-DCs68cQO.js";import{S as he,a as pe,b as xe,c as fe,d as ge,e as be,f as je,T as _e,g as ye,h as U,i as W,j as Se,D as we,O as X,C as Y,k as ve,l as G,m as Q,P as Ne,R as Ce,E as Te}from"./env_variables-C_Ck8DGs.js";import{A as He}from"./arguments-Oxm5pj2P.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),V=g.forwardRef(({className:t,type:n,...o},l)=>e.jsx("input",{type:n,className:N("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:l,...o}));V.displayName="Input";const De=({hostedProcess:t})=>{var x,d;const{startSite:n,stopSite:o}=B(),p=((d=(x=le().data)==null?void 0:x.find(s=>s.hostname===t.host_name))==null?void 0:d.state)??K.Stopped;return e.jsxs("main",{style:{display:"flex",width:"100%"},className:"sm:gap-6 gap-4 flex max-w-[900px] flex-col sm:flex-row",children:[e.jsxs("div",{className:"flex-grow flex flex-col gap-4 sm:gap-6",children:[e.jsxs(k,{children:[e.jsxs(D,{children:[e.jsx(A,{children:"Site details"}),e.jsxs(O,{children:["General information for"," ",e.jsx("span",{className:"font-bold text-[var(--color2)]",children:t.host_name})]})]}),e.jsx(I,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-1",children:"Hostname"}),e.jsx(V,{disabled:!0,value:t.host_name})]}),t&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-1",children:"Port"}),e.jsx(V,{disabled:!0,value:t.port})]})]})})]}),e.jsx(k,{children:e.jsxs(D,{children:[e.jsx(A,{children:"Metrics"}),e.jsxs(O,{children:["Metrics is not yet available for"," ",e.jsx("span",{className:"font-bold text-[var(--color2)]",children:t.host_name})]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(k,{children:[e.jsxs(D,{children:[e.jsx(A,{children:"Status"}),e.jsxs(O,{children:["Current status for"," ",e.jsx("span",{className:"font-bold text-[var(--color2)]",children:t==null?void 0:t.host_name})]})]}),e.jsx(I,{children:e.jsx(ie,{className:N(p===K.Running&&"bg-green-800 text-white"),children:p})})]}),e.jsxs(k,{className:"flex-grow-[.25] h-[max-content]",children:[e.jsxs(D,{children:[e.jsx(A,{children:"Actions"}),e.jsxs(O,{children:["Available actions for"," ",e.jsx("span",{className:"font-bold text-[var(--color2)]",children:t==null?void 0:t.host_name})]})]}),e.jsx(I,{children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(z,{disabled:n.isPending||o.isPending||p===K.Running,onClick:()=>{t&&M.promise(n.mutateAsync({hostname:t.host_name}),{loading:"Starting site..",success:"Site started!",error:s=>`Failed to start site: ${s}`})},size:"sm",className:"w-full uppercase font-bold",children:"start"}),e.jsx(z,{disabled:n.isPending||o.isPending||p===K.Stopped,onClick:()=>{t&&M.promise(o.mutateAsync({hostname:t.host_name}),{loading:"Stopping site..",success:"Site stopped!",error:s=>`Failed to stop site: ${s}`})},size:"sm",className:"w-full uppercase font-bold",children:"stop"})]})})]})]})]})},Ae=({sections:t})=>{const n=L(),l=new URLSearchParams(window.location.search).get("tab"),[p,x]=g.useState(Number(l)??0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",gap:"20px"},className:"pl-[20px] md:pl-0",children:t==null?void 0:t.map((d,s)=>e.jsx(Oe,{active:p===s,onClick:()=>{n.navigate({search:{tab:s}}),x(s)},title:d.name},s))}),e.jsx("div",{style:{height:"1px",width:"100%",background:"#ffffff44",marginTop:"-1px",marginBottom:"20px"}}),t==null?void 0:t[p].content]})},Oe=({active:t,title:n,onClick:o})=>e.jsx("div",{className:N("p-2",t&&"border border-[#ffffff44]",!t&&"border border-transparent","rounded-tl-lg","rounded-tr-lg"),style:{color:t?"var(--color2)":"#fff",cursor:"pointer",borderBottom:t?"1px solid var(--bg-color)":0},onClick:o,children:n}),q=({site:t,show:n,onClose:o,listIndex:l})=>{var c,F,P,$;const{data:p}=J(),{updateRemoteSite:x}=B(),d=p.find(i=>i.host_name===t.host_name),s=d==null?void 0:d.backends[l],[_,T]=g.useState((s==null?void 0:s.address)??""),[v,j]=g.useState((s==null?void 0:s.port)??8080),f=(s==null?void 0:s.https)??!1,S=({newBackendSettings:i})=>{const a=[...t.backends.slice(0,l),i,...t.backends.slice(l+1)];x.mutateAsync({hostname:t.host_name,siteSettings:{...t,backends:a}})};return s?(console.log("not null, show:",n),e.jsx(he,{open:n,onOpenChange:o,children:e.jsxs(pe,{className:"bg-[#242424] border-l-[#ffffff10] w-full",children:[e.jsxs(xe,{className:"text-left",children:[e.jsx(fe,{className:"text-white",children:"Edit backend"}),e.jsxs(ge,{children:["Making changes to ",s.address]})]}),e.jsxs(y,{children:[e.jsx(u,{vertical:!0,title:"Address",subTitle:m.hostname_frontend,children:e.jsx(b,{originalValue:s==null?void 0:s.address,onSave:()=>{S({newBackendSettings:{port:s.port,address:_,hints:(s==null?void 0:s.hints)??[],https:f}})},withSaveButton:!0,value:_,onChange:i=>{T(i.target.value)}})}),e.jsx(u,{vertical:!0,title:"Port",subTitle:m.port,children:e.jsx(b,{originalValue:s==null?void 0:s.port,withSaveButton:!0,onSave:()=>{S({newBackendSettings:{port:v,address:s.address,hints:(s==null?void 0:s.hints)??[],https:f}})},value:v,onChange:i=>{isNaN(Number(i.target.value))||j(Number(i.target.value))}})}),e.jsx(u,{labelFor:"use_https",rowOnly:!0,title:"HTTPS",subTitle:m.https,children:e.jsx(b,{checked:f,onChange:()=>{S({newBackendSettings:{port:s.port,address:s.address,hints:(s==null?void 0:s.hints)??[],https:!f}})},name:"use_https",id:"use_https",type:"checkbox",style:{width:"20px",height:"20px"}})}),e.jsxs("div",{children:[e.jsx(u,{title:"Hints",subTitle:m.h2_hint}),e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"start",marginTop:"4px"},children:[e.jsx(C,{onClick:()=>{var i;S({newBackendSettings:{port:s.port,address:s.address,hints:(i=s==null?void 0:s.hints)!=null&&i.includes(r.H2)?s==null?void 0:s.hints.filter(a=>a!==r.H2):[...(s==null?void 0:s.hints)??[],r.H2],https:f}})},checked:!!((c=s==null?void 0:s.hints)!=null&&c.includes(r.H2)),title:"H2"}),e.jsx(C,{onClick:()=>{var i;S({newBackendSettings:{port:s.port,address:s.address,hints:(i=s==null?void 0:s.hints)!=null&&i.includes(r.H2C)?s==null?void 0:s.hints.filter(a=>a!==r.H2C):[...(s==null?void 0:s.hints)??[],r.H2C],https:f}})},checked:!!((F=s==null?void 0:s.hints)!=null&&F.includes(r.H2C)),title:"H2C"}),e.jsx(C,{onClick:()=>{var i;S({newBackendSettings:{port:s.port,address:s.address,hints:(i=s==null?void 0:s.hints)!=null&&i.includes(r.H2CPK)?s==null?void 0:s.hints.filter(a=>a!==r.H2CPK):[...(s==null?void 0:s.hints)??[],r.H2CPK],https:f}})},checked:!!((P=s==null?void 0:s.hints)!=null&&P.includes(r.H2CPK)),title:"H2CPK"}),e.jsx(C,{onClick:()=>{var i;S({newBackendSettings:{port:s.port,address:s.address,hints:(i=s==null?void 0:s.hints)!=null&&i.includes(r.NOH2)?s==null?void 0:s.hints.filter(a=>a!==r.NOH2):[...(s==null?void 0:s.hints)??[],r.NOH2],https:f}})},checked:!!(($=s==null?void 0:s.hints)!=null&&$.includes(r.NOH2)),title:"NOH2"})]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:".5fr 1fr",gap:"10px",marginTop:"5px"}}),e.jsxs(be,{className:"flex flex-row gap-4",children:[e.jsx(R,{onClick:async()=>{try{await x.mutateAsync({hostname:t.host_name,siteSettings:{...t,backends:t.backends.filter((i,a)=>a!==l)}}),o()}catch(i){console.error("delete backend error:",i)}},style:{width:"150px",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"5px",justifyContent:"center"},dangerButton:!0,children:"Delete"}),e.jsx(je,{asChild:!0,children:e.jsx(R,{type:"submit",children:"Close"})})]})]})})):(console.log("null"),null)},Re=({site:t})=>{var d,s;const{updateRemoteSite:n}=B(),[o,l]=g.useState({backend:void 0,show:!1,listIndex:-1}),p=async()=>{await n.mutateAsync({hostname:t.host_name,siteSettings:{...t,backends:[...t.backends,{address:"NEW_BACKEND",port:8080,hints:[],https:!1}]}})},x=["hover:cursor-pointer"];return((d=t.backends)==null?void 0:d.length)===0&&x.push("border-0"),e.jsxs(e.Fragment,{children:[e.jsxs(_e,{children:[e.jsx(ye,{children:(s=t.backends)==null?void 0:s.map((_,T)=>e.jsx(U,{className:"hover:cursor-pointer",onClick:()=>{l({backend:_,show:!0,listIndex:T})},children:e.jsx(W,{className:"font-medium",children:_.address})},JSON.stringify(_)))}),e.jsx(Se,{className:x.join(" "),children:e.jsx(U,{onClick:p,children:e.jsx(W,{className:"bg-transparent",colSpan:3,children:e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx(we,{}),e.jsx("span",{children:"Add new backend"})]})})})})]}),e.jsx(q,{listIndex:o.listIndex,site:t,show:o.show,onClose:()=>l(_=>({..._,show:!1}))},JSON.stringify(o.backend))]})},Fe=Ce,Pe=Ne,Z=g.forwardRef(({className:t,...n},o)=>e.jsx(X,{ref:o,className:N("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n}));Z.displayName=X.displayName;const ee=g.forwardRef(({className:t,children:n,...o},l)=>e.jsxs(Pe,{children:[e.jsx(Z,{}),e.jsxs(Y,{ref:l,className:N("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[n,e.jsxs(ve,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ee.displayName=Y.displayName;const te=({className:t,...n})=>e.jsx("div",{className:N("flex flex-col space-y-1.5 text-center sm:text-left",t),...n});te.displayName="DialogHeader";const se=({className:t,...n})=>e.jsx("div",{className:N("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n});se.displayName="DialogFooter";const ae=g.forwardRef(({className:t,...n},o)=>e.jsx(G,{ref:o,className:N("text-lg font-semibold leading-none tracking-tight",t),...n}));ae.displayName=G.displayName;const ne=g.forwardRef(({className:t,...n},o)=>e.jsx(Q,{ref:o,className:N("text-sm text-muted-foreground",t),...n}));ne.displayName=Q.displayName;function oe({title:t,subtitle:n,onConfirm:o,onClose:l,show:p,noBtnText:x,yesBtnText:d}){return e.jsx(Fe,{open:p,onOpenChange:l,children:e.jsxs(ee,{className:"sm:max-w-[425px] bg-[#09090b]",children:[e.jsxs(te,{children:[e.jsx(ae,{children:t}),e.jsx(ne,{children:n})]}),e.jsxs(se,{className:"gap-2",children:[e.jsx(R,{onClick:l,secondary:!0,type:"submit",children:x??"No, cancel"}),e.jsx(R,{onClick:o,type:"submit",children:d??"Yes, confirm"})]})]})})}const $e=({site:t})=>{const{deleteSite:n,updateRemoteSite:o}=B(),[l,p]=g.useState(t==null?void 0:t.host_name),[x,d]=g.useState(!1),[s,_]=g.useState({backend:void 0,show:!1,listIndex:-1});g.useEffect(()=>{_(j=>({...j,backends:t.backends}))},[t]);const T=L(),v=(j,f)=>{let S=Array.isArray(f)||isNaN(f)===!1?f:`${f}`;M.promise(o.mutateAsync({hostname:t.host_name,siteSettings:{...t,[j]:S}}),{loading:`Updating settings.. [${t.host_name}]`,success:`Settings updated! [${t.host_name}]`,error:c=>`${c}`})};return e.jsx("main",{className:"grid flex-1 items-start gap-4 sm:py-0 md:gap-8 max-w-[900px]",style:{},onSubmit:j=>{j.preventDefault()},children:e.jsxs(k,{className:"mb-8",children:[e.jsxs(D,{children:[e.jsx(A,{children:"Site details"}),e.jsxs(O,{children:["General configuration for"," ",e.jsx("span",{className:"font-bold text-[var(--color2)]",children:t.host_name})]})]}),e.jsxs(I,{children:[e.jsx(y,{marginTop:"0px",noTopSeparator:!0,children:e.jsx(u,{title:"Hostname",subTitle:m.hostname_frontend,children:e.jsx(b,{originalValue:t.host_name,onSave:j=>{v("host_name",j)},withSaveButton:!0,value:l,onChange:j=>p(j.target.value)})})}),e.jsxs(y,{noTopSeparator:!0,children:[e.jsx(u,{labelFor:"capture_subdomains",rowOnly:!0,title:"Capture sub-domains",subTitle:m.capture_subdomains,children:e.jsx(b,{onChange:()=>{v("capture_subdomains",!t.capture_subdomains)},checked:!!t.capture_subdomains,type:"checkbox",name:"capture_subdomains",id:"capture_subdomains",style:{width:"20px",height:"20px"}})}),e.jsx(u,{rowOnly:!0,labelFor:"disable_tcp_tunnel",title:"Disable TCP tunnel mode",subTitle:m.disable_tcp_tunnel,children:e.jsx(b,{type:"checkbox",checked:!!t.disable_tcp_tunnel_mode,onChange:()=>{v("disable_tcp_tunnel_mode",!t.disable_tcp_tunnel_mode)},id:"disable_tcp_tunnel",name:"disable_tcp_tunnel",style:{width:"20px",height:"20px"}})}),e.jsx(u,{rowOnly:!0,labelFor:"forward_subdomains",title:"Forward sub-domains",subTitle:m.forward_subdomains,children:e.jsx(b,{type:"checkbox",checked:!!t.forward_subdomains,onChange:()=>{v("forward_subdomains",!t.forward_subdomains)},id:"forward_subdomains",name:"forward_subdomains",style:{width:"20px",height:"20px"}})})]}),e.jsxs(y,{noTopSeparator:!0,noBottomSeparator:!0,children:[e.jsx(u,{title:"Backends",subTitle:m.backends}),e.jsx(Re,{site:t})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"end",marginTop:"20px"},children:e.jsx(R,{onClick:()=>{d(!0)},style:{width:"max-content"},dangerButton:!0,children:"Delete site"})}),e.jsx(oe,{onClose:()=>d(!1),onConfirm:()=>{d(!1),n.mutateAsync({hostname:t.host_name},{onSuccess:()=>{d(!1),T.navigate({to:"/"})}})},show:x,title:"Delete",yesBtnText:"Yes, delete it",subtitle:`Are you sure you want to delete the site '${t.host_name}'?`}),e.jsx(q,{listIndex:s.listIndex,site:t,show:s.show,onClose:()=>_(j=>({...j,show:!1}))},JSON.stringify(s.backend))]})]})},t.host_name)},Ie=({site:t})=>{var F,P,$,i;const{updateSite:n,deleteSite:o}=B(),[l,p]=g.useState(t.host_name),[x,d]=g.useState(t.port??8080),[s,_]=g.useState(t.dir??void 0),[T,v]=g.useState(t.bin),[j,f]=g.useState(!1),S=L(),c=(a,h)=>{let w=Array.isArray(h)||isNaN(h)===!1?h:`${h}`;M.promise(n.mutateAsync({hostname:t.host_name,siteSettings:{...t,[a]:w}}),{loading:`Updating settings.. [${t.host_name}]`,success:`Settings updated! [${t.host_name}]`,error:H=>`${H}`})};return e.jsx("main",{className:"grid flex-1 items-start gap-4 sm:py-0 md:gap-8 max-w-[900px]",style:{},onSubmit:a=>{a.preventDefault()},children:e.jsxs(k,{className:"mb-8",children:[e.jsxs(D,{children:[e.jsx(A,{children:"Settings"}),e.jsxs(O,{children:["Current configuration for"," ",e.jsx("span",{className:"font-bold text-[var(--color2)]",children:t.host_name})]})]}),e.jsxs(I,{children:[e.jsxs(y,{marginTop:"0px",noTopSeparator:!0,children:[e.jsx(u,{title:"Hostname",subTitle:m.hostname_frontend,children:e.jsx(b,{originalValue:t.host_name,onSave:a=>{c("host_name",a)},withSaveButton:!0,value:l,onChange:a=>p(a.target.value)})}),e.jsx(u,{title:"Port",subTitle:m.port,children:e.jsx(b,{originalValue:t.port??8080,withSaveButton:!0,onSave:a=>{c("port",a)},value:x,onChange:a=>{isNaN(Number(a.target.value))||d(Number(a.target.value))}})})]}),e.jsxs(y,{noTopSeparator:!0,children:[e.jsx(u,{title:"Directory",subTitle:m.directory,children:e.jsx(b,{value:s,withSaveButton:!0,originalValue:t.dir??void 0,onSave:a=>{c("dir",a)},onChange:a=>_(a.target.value)})}),e.jsx(u,{title:"Bin",subTitle:m.binary,children:e.jsx(b,{value:T,withSaveButton:!0,originalValue:t.bin,onSave:a=>{c("bin",a)},onChange:a=>v(a.target.value)})})]}),e.jsx(y,{noTopSeparator:!0,children:e.jsx(u,{labelFor:"use_https",rowOnly:!0,title:"HTTPS",subTitle:m.https,children:e.jsx(b,{checked:!!t.https,onChange:()=>{c("https",!t.https)},name:"use_https",id:"use_https",type:"checkbox",style:{width:"20px",height:"20px"}})})}),e.jsx(y,{noTopSeparator:!0,children:e.jsx(u,{labelFor:"auto_start",rowOnly:!0,title:"Auto start",subTitle:m.auto_start,children:e.jsx(b,{id:"auto_start",checked:!!t.auto_start,name:"auto_start",onChange:()=>{c("auto_start",!t.auto_start)},type:"checkbox",style:{width:"20px",height:"20px"}})})}),e.jsxs(y,{noTopSeparator:!0,children:[e.jsx(u,{labelFor:"capture_subdomains",rowOnly:!0,title:"Capture sub-domains",subTitle:m.capture_subdomains,children:e.jsx(b,{onChange:()=>{c("capture_subdomains",!t.capture_subdomains)},checked:!!t.capture_subdomains,type:"checkbox",name:"capture_subdomains",id:"capture_subdomains",style:{width:"20px",height:"20px"}})}),e.jsx(u,{rowOnly:!0,labelFor:"disable_tcp_tunnel",title:"Disable TCP tunnel mode",subTitle:m.disable_tcp_tunnel,children:e.jsx(b,{type:"checkbox",checked:!!t.disable_tcp_tunnel_mode,onChange:()=>{c("disable_tcp_tunnel_mode",!t.disable_tcp_tunnel_mode)},id:"disable_tcp_tunnel",name:"disable_tcp_tunnel",style:{width:"20px",height:"20px"}})}),e.jsx(u,{rowOnly:!0,labelFor:"forward_subdomains",title:"Forward sub-domains",subTitle:m.forward_subdomains,children:e.jsx(b,{type:"checkbox",checked:!!t.forward_subdomains,onChange:()=>{c("forward_subdomains",!t.forward_subdomains)},id:"forward_subdomains",name:"forward_subdomains",style:{width:"20px",height:"20px"}})})]}),e.jsxs(y,{noTopSeparator:!0,noBottomSeparator:!0,children:[e.jsx(u,{title:"H2 Hints",subTitle:m.h2_hint}),e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"start"},children:[e.jsx(C,{onClick:()=>{var a;c("hints",(a=t.hints)!=null&&a.includes(r.H2)?t.hints.filter(h=>h!==r.H2):[...t.hints??[],r.H2])},checked:!!((F=t==null?void 0:t.hints)!=null&&F.includes(r.H2)),title:"H2"}),e.jsx(C,{onClick:()=>{var a;c("hints",(a=t.hints)!=null&&a.includes(r.H2C)?t.hints.filter(h=>h!==r.H2C):[...t.hints??[],r.H2C])},checked:!!((P=t==null?void 0:t.hints)!=null&&P.includes(r.H2C)),title:"H2C"}),e.jsx(C,{onClick:()=>{var a;c("hints",(a=t.hints)!=null&&a.includes(r.H2CPK)?t.hints.filter(h=>h!==r.H2CPK):[...t.hints??[],r.H2CPK])},checked:!!(($=t==null?void 0:t.hints)!=null&&$.includes(r.H2CPK)),title:"H2CPK"}),e.jsx(C,{onClick:()=>{var a;c("hints",(a=t.hints)!=null&&a.includes(r.NOH2)?t.hints.filter(h=>h!==r.NOH2):[...t.hints??[],r.NOH2])},checked:!!((i=t==null?void 0:t.hints)!=null&&i.includes(r.NOH2)),title:"NOH2"})]}),e.jsx(u,{title:"Log format",subTitle:m.log_format,children:e.jsxs("select",{className:"text-black rounded pl-3 pr-3",value:t.log_format??E.Standard,onChange:a=>{c("log_format",a.target.value)},name:"log_format",style:{height:"30px",width:"100%"},children:[e.jsx("option",{value:E.Standard,children:"Standard"}),e.jsx("option",{value:E.Dotnet,children:"Dotnet"})]})})]}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(u,{labelFor:"exclude_from_start_all",rowOnly:!0,title:"Exclude from 'start all'",subTitle:m.exclude_from_start_all,children:e.jsx(b,{checked:!!t.exclude_from_start_all,onChange:()=>{c("exclude_from_start_all",!t.exclude_from_start_all)},id:"exclude_from_start_all",type:"checkbox",style:{width:"20px",height:"20px"}})})}),e.jsx(y,{noBottomSeparator:!0,children:e.jsx(u,{vertical:!0,title:"Environment variables",subTitle:m.env_vars,children:e.jsx(Te,{keys:t.env_vars??[],onRemoveKey:a=>{var h;c("env_vars",(h=t.env_vars)==null?void 0:h.filter(w=>w.key!==a))},onNewKey:(a,h)=>{var w;c("env_vars",[...((w=t.env_vars)==null?void 0:w.filter(H=>H.key!==a.key&&H.key!==h))??[],{key:a.key,value:a.value}])}})})}),e.jsx(y,{noBottomSeparator:!0,noTopSeparator:!0,children:e.jsx(u,{vertical:!0,title:"Arguments",subTitle:m.args,children:e.jsx(He,{onAddArg:(a,h)=>{var w;c("args",[...((w=t.args)==null?void 0:w.filter(H=>H!==h))??[],a])},onRemoveArg:a=>{var h;c("args",[...((h=t.args)==null?void 0:h.filter(w=>w!==a))??[]])},defaultKeys:t.args??[]})})}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"end",marginTop:"20px"},children:e.jsx(R,{onClick:()=>{f(!0)},style:{width:"max-content"},dangerButton:!0,children:"Delete site"})}),e.jsx(oe,{onClose:()=>f(!1),onConfirm:()=>{f(!1),o.mutateAsync({hostname:t.host_name},{onSuccess:()=>{f(!1),S.navigate({to:"/"})}})},show:j,title:"Delete",yesBtnText:"Yes, delete it",subtitle:`Are you sure you want to delete the site '${t.host_name}'?`})]})]})},t.host_name)},Be=()=>{const{data:t}=de(),{data:n}=J(),o=ce({from:"/site/$siteName"}),l=t.find(d=>d.host_name.replaceAll("http://","").replaceAll("https://","")===o.siteName),p=n.find(d=>d.host_name.replaceAll("http://","").replaceAll("https://","")===o.siteName);if(p)return e.jsx($e,{site:p},p.host_name);if(!l)return e.jsx("p",{children:"hosted process not found.."});const x=[{name:"Overview",content:e.jsx(De,{hostedProcess:l})},{name:"Settings",content:e.jsx(Ie,{site:l})},{name:"Logs",content:e.jsx("main",{className:"grid flex-1 items-start gap-4 sm:py-0 md:gap-8 max-w-[900px]",children:e.jsx(ue,{hostedProcess:l})})}];return e.jsx("div",{children:e.jsx(Ae,{sections:x},l==null?void 0:l.host_name)})},ze=me("/site/$siteName")({component:Be});export{ze as Route};
